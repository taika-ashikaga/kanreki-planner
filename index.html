<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‚„æš¦ç¥ã„ã«ãŠã™ã™ã‚ã®å®¿ æ¤œç´¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: #F8F7F4;
            color: #383838;
        }
        .filter-btn.active {
            background-color: #006D77;
            color: #ffffff;
            border-color: #006D77;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        .hotel-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .hotel-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .modal {
            transition: opacity 0.25s ease;
        }
        .modal-content {
            transition: transform 0.25s ease;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-[#006D77]">ãŠçˆ¶æ§˜ã®é‚„æš¦ç¥ã„ã«æœ€é©ãªå®¿æ¢ã—</h1>
            <p class="mt-2 text-lg text-gray-600">ã”å¸Œæœ›ã®æ¡ä»¶ã§ã€å¿ƒã«æ®‹ã‚‹ãŠç¥ã„ã®æ—…ã‚’è¨ˆç”»ã—ã¾ã—ã‚‡ã†ã€‚</p>
        </header>

        <div id="controls" class="bg-white p-6 rounded-xl shadow-md mb-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label class="font-bold text-gray-700 mb-2 block">éƒ½é“åºœçœŒ</label>
                    <div id="prefecture-filters" class="flex flex-wrap gap-2">
                        <button class="filter-btn active w-full sm:w-auto flex-grow text-center px-4 py-2 border rounded-lg" data-filter="prefecture" data-value="all">ã™ã¹ã¦</button>
                        <button class="filter-btn w-full sm:w-auto flex-grow text-center px-4 py-2 border rounded-lg" data-filter="prefecture" data-value="æ„›çŸ¥">æ„›çŸ¥çœŒ</button>
                        <button class="filter-btn w-full sm:w-auto flex-grow text-center px-4 py-2 border rounded-lg" data-filter="prefecture" data-value="å²é˜œ">å²é˜œçœŒ</button>
                        <button class="filter-btn w-full sm:w-auto flex-grow text-center px-4 py-2 border rounded-lg" data-filter="prefecture" data-value="ä¸‰é‡">ä¸‰é‡çœŒ</button>
                    </div>
                </div>
                <div>
                    <label for="budget-slider" class="font-bold text-gray-700 mb-2 block">ã”äºˆç®— (1åã‚ãŸã‚Š)</label>
                    <input type="range" id="budget-slider" min="10000" max="30000" step="1000" value="25000" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <div class="text-center mt-2 font-semibold text-[#006D77]">ã€œ<span id="budget-value">25,000</span>å††</div>
                </div>
                <div>
                    <label class="font-bold text-gray-700 mb-2 block">ã“ã ã‚ã‚Šæ¡ä»¶</label>
                    <div id="feature-filters" class="flex flex-wrap gap-2">
                        <button class="filter-btn px-4 py-2 border rounded-lg" data-filter="feature" data-value="kanrekiPlan">ğŸ‰ é‚„æš¦ç¥ã„ãƒ—ãƒ©ãƒ³</button>
                        <button class="filter-btn px-4 py-2 border rounded-lg" data-filter="feature" data-value="chanchanko">ğŸ‘˜ ã¡ã‚ƒã‚“ã¡ã‚ƒã‚“ã“</button>
                        <button class="filter-btn px-4 py-2 border rounded-lg" data-filter="feature" data-value="allYouCanDrink">ğŸ» é£²ã¿æ”¾é¡Œ</button>
                        <button class="filter-btn px-4 py-2 border rounded-lg" data-filter="feature" data-value="privateDining">ğŸ½ï¸ å€‹å®¤é£Ÿ</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="results-summary" class="text-center mb-8">
             <p class="text-xl font-medium">è©²å½“ã™ã‚‹æ–½è¨­: <span id="results-count" class="font-bold text-[#006D77]">0</span>ä»¶</p>
        </div>
        
        <main id="hotel-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        </main>
        
        <section id="chart-section" class="mt-12 bg-white p-6 rounded-xl shadow-md">
             <h2 class="text-2xl font-bold text-center mb-4">ä¾¡æ ¼å¸¯ã®æ¯”è¼ƒ</h2>
             <div class="chart-container">
                <canvas id="budget-chart"></canvas>
            </div>
            <p class="text-sm text-center text-gray-500 mt-4">å„æ–½è¨­ã®1åã‚ãŸã‚Šã®æœ€ä½æ–™é‡‘ï¼ˆç›®å®‰ï¼‰ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚æ–™é‡‘ã¯ãƒ—ãƒ©ãƒ³ã‚„æ™‚æœŸã«ã‚ˆã‚Šå¤‰å‹•ã—ã¾ã™ã€‚</p>
        </section>

    </div>

    <div id="hotel-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 opacity-0 pointer-events-none">
        <div class="modal-content transform -translate-y-10 bg-white rounded-xl shadow-2xl w-11/12 md:max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white px-4 pt-4 pb-2 md:px-8 md:pt-6 md:pb-4 flex justify-between items-center border-b">
                <h3 id="modal-title" class="text-xl md:text-2xl font-bold text-[#006D77]"></h3>
                <button id="close-modal-btn" class="text-3xl text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div id="modal-body" class="p-4 md:p-8">
            </div>
        </div>
    </div>

    <script>
        const hotelData = [
            { id: 1, name: 'è¥¿æµ¦æ¸©æ³‰ æ—¬æ™¯æµªæ¼« éŠ€æ³¢è˜', prefecture: 'æ„›çŸ¥', location: 'è’²éƒ¡å¸‚', price: 18700, features: { kanrekiPlan: true, chanchanko: true, allYouCanDrink: true, privateDining: false }, description: 'ä¸‰æ²³æ¹¾ã‚’ä¸€æœ›ã§ãã‚‹çµ¶æ™¯ãŒè‡ªæ…¢ã®æ—…é¤¨ã€‚è¨˜å¿µæ—¥ãƒ—ãƒ©ãƒ³ã§ã¯èµ¤ã„ã¡ã‚ƒã‚“ã¡ã‚ƒã‚“ã“ã®è²¸å‡ºã‚„ç¥ã„è†³ã®æ‰‹é…ãŒå¯èƒ½ã€‚ã€ŒPremiumãƒ©ã‚¦ãƒ³ã‚¸ã€ä»˜ãå®¢å®¤ã§ã¯ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ã‚‚æ¥½ã—ã‚ã¾ã™ã€‚', touristSpots: 'ãƒ‘ãƒ¼ãƒ ãƒ“ãƒ¼ãƒï¼ˆç›®ã®å‰ï¼‰ã€ä¸‡è‘‰ã®å°å¾„ï¼ˆå¾’æ­©3åˆ†ï¼‰' },
            { id: 2, name: 'å—çŸ¥å¤šæ¸©æ³‰éƒ· æºæ°é¦™', prefecture: 'æ„›çŸ¥', location: 'å—çŸ¥å¤šç”º', price: 22000, features: { kanrekiPlan: true, chanchanko: true, allYouCanDrink: false, privateDining: false }, description: 'æ—¥æœ¬åˆã®ã€Œé¦™ã‚Šã€ãŒãƒ†ãƒ¼ãƒã®å’Œé¢¨æ—…é¤¨ã€‚é•·å¯¿ç¥ã„ãƒ—ãƒ©ãƒ³ã§ã¯ã¡ã‚ƒã‚“ã¡ã‚ƒã‚“ã“ã‚„ãƒŸãƒ‹èŠ±æŸãŒç”¨æ„ã•ã‚Œã€å¿ƒæ¸©ã¾ã‚‹ãŠç¥ã„ãŒæœŸå¾…ã§ãã¾ã™ã€‚', touristSpots: 'é‡é–“åŸ¼ç¯å°ï¼ˆè»Šã§ç´„10åˆ†ï¼‰ã€æ—¥é–“è³€å³¶ï¼ˆæ¸¯ã¾ã§è»Š15åˆ†ï¼‹èˆ¹20åˆ†ï¼‰' },
            { id: 3, name: 'ãƒ’ãƒ«ãƒˆãƒ³åå¤å±‹', prefecture: 'æ„›çŸ¥', location: 'åå¤å±‹å¸‚', price: 25000, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: false, privateDining: true }, description: 'åå¤å±‹ä¸­å¿ƒéƒ¨ã®å›½éš›çš„ãƒ›ãƒ†ãƒ«ã€‚æ—¥æœ¬æ–™ç†ã€Œæºæ°ã€ã«ã¯å€‹å®¤ã§åˆ©ç”¨ã§ãã‚‹é•·å¯¿ç¥ã„ãƒ—ãƒ©ãƒ³ãŒã‚ã‚Šã€æ´—ç·´ã•ã‚ŒãŸãŠç¥ã„ãŒå¯èƒ½ã§ã™ã€‚ï¼ˆæ–™é‡‘ã¯è¦ç¢ºèªï¼‰', touristSpots: 'åå¤å±‹åŸã€å¾³å·åœ’ãªã©å¸‚å†…å„æ‰€ã¸å¥½ã‚¢ã‚¯ã‚»ã‚¹' },
            { id: 4, name: 'å¤©ç©ºæµ·éŠã®å®¿ æœ«åºƒ', prefecture: 'æ„›çŸ¥', location: 'è’²éƒ¡å¸‚', price: 24200, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: false, privateDining: false }, description: 'è¨˜å¿µæ—¥ãƒ—ãƒ©ãƒ³ã«ã¯ã‚±ãƒ¼ã‚­ã‚„ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒªãƒ³ã‚°ãƒ¯ã‚¤ãƒ³ãŒä»˜ãã¾ã™ã€‚70å‘¨å¹´è¨˜å¿µãƒ—ãƒ©ãƒ³ãªã©ã€ãŠç¥ã„å‘ã‘ã®é¸æŠè‚¢ãŒè±Šå¯Œã§ã™ã€‚', touristSpots: 'ç«¹å³¶ã€ãƒ©ã‚°ãƒ¼ãƒŠãƒ†ãƒ³ãƒœã‚¹ãªã©ï¼ˆè»Šã§ã‚¢ã‚¯ã‚»ã‚¹ï¼‰' },
            { id: 5, name: 'ç¯ å³¶é›¢å®® çœŸç ‚ æ‚ ã€…åºµ', prefecture: 'æ„›çŸ¥', location: 'å—çŸ¥å¤šç”ºç¯ å³¶', price: 25000, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: false, privateDining: false }, description: 'é›¢å³¶ãƒ»ç¯ å³¶ã«ã‚ã‚‹é™ã‹ãªå®¿ã€‚æ–°é®®ãªæµ·ã®å¹¸ã‚’å ªèƒ½ã§ãã¾ã™ã€‚ç‰¹å…¸ä»˜ããƒ—ãƒ©ãƒ³ã®å­˜åœ¨ãŒç¤ºå”†ã•ã‚Œã¦ãŠã‚Šã€è¨˜å¿µæ—¥åˆ©ç”¨ã«é©ã—ã¦ã„ã¾ã™ã€‚ï¼ˆæ–™é‡‘ã¯è¦ç¢ºèªï¼‰', touristSpots: 'ç¯ å³¶å†…ã®ãƒ“ãƒ¼ãƒã€é‡£ã‚Šã‚¹ãƒãƒƒãƒˆ' },
            { id: 6, name: 'ãƒ›ãƒ†ãƒ«ãƒã‚¤ã‚¹ãƒ†ã‚¤ã‚ºãƒ—ãƒ¬ãƒŸã‚¢é‡‘å±±', prefecture: 'æ„›çŸ¥', location: 'åå¤å±‹å¸‚', price: 15000, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: true, privateDining: false }, description: 'é‡‘å±±ç·åˆé§…è¿‘ãã®ä¾¿åˆ©ãªãƒ›ãƒ†ãƒ«ã€‚ã€Œé£²ã¿æ”¾é¡Œä»˜ãã€ãƒ—ãƒ©ãƒ³ã®è¨˜è¿°ãŒã‚ã‚Šã€ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãªãŠç¥ã„ãƒ‡ã‚£ãƒŠãƒ¼ã‚’æ¥½ã—ã¿ãŸã„å ´åˆã«é©ã—ã¦ã„ã¾ã™ã€‚ï¼ˆæ–™é‡‘ã¯é£Ÿäº‹ãƒ—ãƒ©ãƒ³ã«ã‚ˆã‚‹ï¼‰', touristSpots: 'é‡‘å±±ç·åˆé§…å‘¨è¾ºã®å•†æ¥­æ–½è¨­ã€ç†±ç”°ç¥å®®' },
            { id: 7, name: 'ãƒ›ãƒ†ãƒ«ã‚¢ãƒ¼ã‚¯ãƒªãƒƒã‚·ãƒ¥è±Šæ©‹', prefecture: 'æ„›çŸ¥', location: 'è±Šæ©‹å¸‚', price: 23000, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: false, privateDining: true }, description: 'è±Šæ©‹é§…ç›´çµã®é«˜å±¤ãƒ›ãƒ†ãƒ«ã€‚ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã«ã¯è¨˜å¿µæ—¥ãƒ—ãƒ©ãƒ³ãŒã‚ã‚Šã€å¤œæ™¯ã‚’çœºã‚ãªãŒã‚‰ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ãªãŠç¥ã„ãŒå¯èƒ½ã§ã™ã€‚', touristSpots: 'è±Šæ©‹å…¬åœ’ï¼ˆå‰ç”°åŸå€ï¼‰ã€è±Šå·ç¨²è·' },
            { id: 8, name: 'ã‚­ãƒ£ãƒƒã‚¹ãƒ«ãƒ—ãƒ©ã‚¶', prefecture: 'æ„›çŸ¥', location: 'åå¤å±‹å¸‚', price: 20000, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: false, privateDining: true }, description: 'åå¤å±‹é§…è¿‘ãã®è€èˆ—ãƒ›ãƒ†ãƒ«ã€‚è¤‡æ•°ã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§è¨˜å¿µæ—¥ãƒ—ãƒ©ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ä¸­è¯ã‚„å’Œé£Ÿãªã©ãŠå¥½ã¿ã«åˆã‚ã›ãŸãŠç¥ã„ãŒã§ãã¾ã™ã€‚', touristSpots: 'JRã‚»ãƒ³ãƒˆãƒ©ãƒ«ã‚¿ãƒ¯ãƒ¼ã‚ºã€ãƒŸãƒƒãƒ‰ãƒ©ãƒ³ãƒ‰ã‚¹ã‚¯ã‚¨ã‚¢' },
        
            { id: 9, name: 'å¥¥é£›é¨¨æ¸©æ³‰éƒ· å±±é‡Œã®ã„ãŠã‚Š è‰å††', prefecture: 'å²é˜œ', location: 'é«˜å±±å¸‚', price: 22110, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: false, privateDining: false }, description: 'å¤æ°‘å®¶ã‚’å†ç”Ÿã—ãŸé¢¨æƒ…ã‚ã‚‹æ—…é¤¨ã€‚ã€ŒãŠç¥ã„ã¯è‰å††ã§ï¼ã€ã¨ã„ã†å°‚ç”¨ãƒ—ãƒ©ãƒ³ãŒã‚ã‚Šã€å›²ç‚‰è£æ–™ç†ã¨å…±ã«å¿ƒæ¸©ã¾ã‚‹ãŠç¥ã„ãŒã§ãã¾ã™ã€‚', touristSpots: 'æ–°ç©‚é«˜ãƒ­ãƒ¼ãƒ—ã‚¦ã‚§ã‚¤ï¼ˆè»Šã§ç´„20åˆ†ï¼‰ã€é£›é¨¨é«˜å±±ï¼ˆè»Šã§ç´„60åˆ†ï¼‰' },
            { id: 10, name: 'ä¸‹å‘‚æ¸©æ³‰ ç´—ã€…ç¾…', prefecture: 'å²é˜œ', location: 'ä¸‹å‘‚å¸‚', price: 18000, features: { kanrekiPlan: true, chanchanko: true, allYouCanDrink: false, privateDining: false }, description: 'ã‚¢ãƒ¼ãƒˆãªé›°å›²æ°—ã®æ—…é¤¨ã€‚é‚„æš¦ç¥ã„ã«ã¯èµ¤ã„ã¡ã‚ƒã‚“ã¡ã‚ƒã‚“ã“ã‚’ç„¡æ–™ã§è²¸ã—å‡ºã—ã¦ãŠã‚Šã€è¨˜å¿µå†™çœŸã«æœ€é©ã§ã™ã€‚', touristSpots: 'ä¸‹å‘‚æ¸©æ³‰åˆæŒæ‘ã€ä¸‹å‘‚æ¸©æ³‰åšç‰©é¤¨ï¼ˆè¿‘éš£ï¼‰' },
            { id: 11, name: 'é•·è‰¯å·æ¸©æ³‰ åå…«æ¥¼', prefecture: 'å²é˜œ', location: 'å²é˜œå¸‚', price: 15400, features: { kanrekiPlan: true, chanchanko: true, allYouCanDrink: false, privateDining: true }, description: '1860å¹´å‰µæ¥­ã®è€èˆ—æ—…é¤¨ã€‚ãŠç¥ã„ä¼šå¸­ãƒ—ãƒ©ãƒ³ãŒã‚ã‚Šã€ã¡ã‚ƒã‚“ã¡ã‚ƒã‚“ã“ã‚»ãƒƒãƒˆã®è²¸å‡ºã‚‚å¯èƒ½ã€‚åŠå€‹å®¤ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§æ°—å…¼ã­ãªãæ¥½ã—ã‚ã¾ã™ã€‚', touristSpots: 'å²é˜œåŸã€å·åŸç”ºã®å¤ã„ç”ºä¸¦ã¿ã€é•·è‰¯å·éµœé£¼ï¼ˆè‡³è¿‘ï¼‰' },
            { id: 12, name: 'æ»å…ƒé¤¨ éŠå­£ã®é‡Œ', prefecture: 'å²é˜œ', location: 'é¤Šè€ç”º', price: 28000, features: { kanrekiPlan: true, chanchanko: true, allYouCanDrink: false, privateDining: true }, description: 'é‚„æš¦ç¥ã„ãƒ—ãƒ©ãƒ³ãŒéå¸¸ã«å……å®Ÿã€‚ç¥æ‡çŸ³ã€ã¡ã‚ƒã‚“ã¡ã‚ƒã‚“ã“ã€è¨˜å¿µå†™çœŸã€è¨˜å¿µæ—¥æ–°èãªã©ã€è‡³ã‚Œã‚Šå°½ãã›ã‚Šã®ã‚µãƒ¼ãƒ“ã‚¹ãŒé­…åŠ›ã§ã™ã€‚ï¼ˆäºˆç®—ã¯è¦ç¢ºèªï¼‰', touristSpots: 'é¤Šè€ã®æ»ã€é¤Šè€å¤©å‘½åè»¢åœ°' },
            { id: 13, name: 'é•·è‰¯å·æ¸©æ³‰ ãƒ›ãƒ†ãƒ«ãƒ‘ãƒ¼ã‚¯', prefecture: 'å²é˜œ', location: 'å²é˜œå¸‚', price: 20000, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: false, privateDining: true }, description: 'é‚„æš¦ãƒ—ãƒ©ãƒ³ã§ã¯å¤•é£ŸãŒéƒ¨å±‹é£Ÿã§æä¾›ã•ã‚Œã€å®¶æ—æ°´å…¥ã‚‰ãšã®ãŠç¥ã„ãŒå¯èƒ½ã§ã™ã€‚é•·è‰¯å·ã®æ™¯è‰²ã‚‚æ¥½ã—ã‚ã¾ã™ã€‚ï¼ˆäºˆç®—ã¯è¦ç¢ºèªï¼‰', touristSpots: 'å²é˜œåŸã€é‡‘è¯å±±ã€é•·è‰¯å·éµœé£¼ï¼ˆè¿‘æ¥ï¼‰' },
            { id: 14, name: 'éƒ½ãƒ›ãƒ†ãƒ« å²é˜œé•·è‰¯å·', prefecture: 'å²é˜œ', location: 'å²é˜œå¸‚', price: 18000, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: false, privateDining: false }, description: 'é•·è‰¯å·ã¨é‡‘è¯å±±ã‚’ä¸€æœ›ã§ãã‚‹ã‚·ãƒ†ã‚£ãƒ›ãƒ†ãƒ«ã€‚ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ã‚¯ãƒ©ãƒ–ã‚‚ç„¡æ–™ã§åˆ©ç”¨ã§ãã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãŠçˆ¶æ§˜ã«ã‚‚å–œã°ã‚Œã¾ã™ã€‚ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§ã®è¨˜å¿µæ—¥å¯¾å¿œã¯è¦ç›¸è«‡ã€‚', touristSpots: 'å²é˜œåŸã€é•·è‰¯å·ï¼ˆãƒ›ãƒ†ãƒ«ã‹ã‚‰ä¸€æœ›ï¼‰' },
            { id: 15, name: 'é£›é¨¨é«˜å±±æ¸©æ³‰ å®ç”Ÿé–£', prefecture: 'å²é˜œ', location: 'é«˜å±±å¸‚', price: 19000, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: false, privateDining: false }, description: 'é£›é¨¨é«˜å±±ã®å¤ã„ç”ºä¸¦ã¿ã«è¿‘ã„æ¸©æ³‰æ—…é¤¨ã€‚è¦³å…‰ã®æ‹ ç‚¹ã¨ã—ã¦éå¸¸ã«ä¾¿åˆ©ã§ã€æ•£ç­–ã‚’æ¥½ã—ã‚“ã å¾Œã€æ¸©æ³‰ã§ã‚†ã£ãã‚Šã§ãã¾ã™ã€‚', touristSpots: 'é«˜å±±ã®å¤ã„ç”ºä¸¦ã¿ã€å®®å·æœå¸‚ï¼ˆå¾’æ­©åœå†…ï¼‰' },
            { id: 16, name: 'å°å·å±‹', prefecture: 'å²é˜œ', location: 'ä¸‹å‘‚å¸‚', price: 17500, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: false, privateDining: false }, description: 'ä¸‹å‘‚æ¸©æ³‰ã®è€èˆ—æ—…é¤¨ã€‚ç•³æ•·ãã®é¤¨å†…ã¨100å¸–ç©ºé–“ã®ç•³é¢¨å‘‚ãŒç‰¹å¾´ã€‚è¨˜å¿µæ—¥ãƒ—ãƒ©ãƒ³ã‚‚ç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ã‚†ã£ãŸã‚Šã¨ã—ãŸãŠç¥ã„ãŒã§ãã¾ã™ã€‚', touristSpots: 'ä¸‹å‘‚æ¸©æ³‰è¡—ã®æ•£ç­–' },
            { id: 17, name: 'éƒ½ãƒªã‚¾ãƒ¼ãƒˆ é£›é¨¨é«˜å±±', prefecture: 'å²é˜œ', location: 'é«˜å±±å¸‚', price: 21000, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: false, privateDining: false }, description: 'é«˜å±±é§…ã‹ã‚‰å¾’æ­©åœå†…ã®ãƒªã‚¾ãƒ¼ãƒˆãƒ›ãƒ†ãƒ«ã€‚æ¸©æ³‰å¤§æµ´å ´ã‚„ã‚¹ãƒ‘ã‚‚å®Œå‚™ã€‚ä¸Šè³ªãªç©ºé–“ã§ãã¤ã‚ãã®æ™‚é–“ã‚’éã”ã›ã¾ã™ã€‚', touristSpots: 'é«˜å±±é™£å±‹ã€å¤ã„ç”ºä¸¦ã¿ï¼ˆå¾’æ­©åœå†…ï¼‰' },

            { id: 18, name: 'Bali & Resort SAYAã®é¢¨', prefecture: 'ä¸‰é‡', location: 'é³¥ç¾½å¸‚', price: 22800, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: true, privateDining: false }, description: 'ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ã‚·ãƒ–ã®ãƒãƒªé¢¨ãƒªã‚¾ãƒ¼ãƒˆã€‚é£²ã¿æ”¾é¡Œã¯ã‚‚ã¡ã‚ã‚“ã€ã‚«ãƒ©ã‚ªã‚±ã‚„å²©ç›¤æµ´ã‚‚æ–™é‡‘å†…ã€‚ãŠé…’å¥½ãã®ãŠçˆ¶æ§˜ã«ã¯æœ€é«˜ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã§ã™ã€‚', touristSpots: 'é³¥ç¾½æ°´æ—é¤¨ï¼ˆè»Šã§ç´„6åˆ†ï¼‰ã€ä¼Šå‹¢ç¥å®®ï¼ˆè»Šã§ç´„30åˆ†ï¼‰' },
            { id: 19, name: 'çµ¶æ™¯æµ·é¢¨ç™’ã—åºµ æ–°å…«å±‹', prefecture: 'ä¸‰é‡', location: 'é³¥ç¾½å¸‚', price: 17500, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: true, privateDining: false }, description: 'å¤ªå¹³æ´‹ã‚’ä¸€æœ›ã§ãã‚‹çµ¶æ™¯ã®å®¿ã€‚é‚„æš¦å‘ã‘ãƒ—ãƒ©ãƒ³ãŒã‚ã‚Šã€æœŸé–“é™å®šã§ãƒ©ã‚¦ãƒ³ã‚¸ã§ã®é£²ã¿æ”¾é¡Œã‚‚å®Ÿæ–½ã€‚æµ·ã®å¹¸ã¨å…±ã«ç¥ã†ã®ã«æœ€é©ã§ã™ã€‚', touristSpots: 'é³¥ç¾½æ°´æ—é¤¨ã€ãƒŸã‚­ãƒ¢ãƒˆçœŸç å³¶ï¼ˆè»Šã§ç´„20åˆ†ï¼‰' },
            { id: 20, name: 'ä¼Šå‹¢å¿—æ‘© æ¸©æ³‰æ›ã‘æµã—ã®å®¿ ã­ã¼ãƒ¼ã‚„ å¿—æ‘©åˆ¥é‚¸', prefecture: 'ä¸‰é‡', location: 'å¿—æ‘©å¸‚', price: 22660, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: false, privateDining: false }, description: 'å…¨å®¤éœ²å¤©é¢¨å‘‚ä»˜ãã®é›¢ã‚Œå½¢å¼ã®å®¿ã€‚ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªç©ºé–“ã§æºæ³‰ã‹ã‘æµã—ã®æ¸©æ³‰ã¨ä¼Šå‹¢å¿—æ‘©ã®ç¾é£Ÿã‚’å ªèƒ½ã§ãã¾ã™ã€‚', touristSpots: 'å¿—æ‘©ã‚¹ãƒšã‚¤ãƒ³æ‘ã€è‹±è™æ¹¾ã‚¯ãƒ«ãƒ¼ã‚º' },
            { id: 21, name: 'éƒ½ãƒªã‚¾ãƒ¼ãƒˆ å¥¥å¿—æ‘© ã‚¢ã‚¯ã‚¢ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆ', prefecture: 'ä¸‰é‡', location: 'å¿—æ‘©å¸‚', price: 19000, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: false, privateDining: false }, description: 'ä¼Šå‹¢å¿—æ‘©å›½ç«‹å…¬åœ’å†…ã«ã‚ã‚‹åºƒå¤§ãªãƒªã‚¾ãƒ¼ãƒˆã€‚æ¸©æ³‰ã€ãƒ—ãƒ¼ãƒ«ã€å¤©æ–‡é¤¨ãªã©æ–½è¨­ãŒå……å®Ÿã—ã¦ãŠã‚Šã€å®¶æ—ã¿ã‚“ãªã§æ¥½ã—ã‚ã¾ã™ã€‚', touristSpots: 'å¿—æ‘©ã‚¹ãƒšã‚¤ãƒ³æ‘ã€æ¨ªå±±å±•æœ›å°' },
            { id: 22, name: 'å¤§æ±Ÿæˆ¸æ¸©æ³‰ç‰©èªPremium é³¥ç¾½å½©æœæ¥½', prefecture: 'ä¸‰é‡', location: 'é³¥ç¾½å¸‚', price: 16000, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: true, privateDining: false }, description: 'é³¥ç¾½æ¹¾ã‚’æœ›ã‚€ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒ†ã‚£éœ²å¤©é¢¨å‘‚ãŒè‡ªæ…¢ã€‚å¤•é£Ÿã¯ãƒã‚¤ã‚­ãƒ³ã‚°å½¢å¼ã§ã€åˆ¥æ–™é‡‘ã§ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«é£²ã¿æ”¾é¡Œã‚‚ä»˜ã‘ã‚‰ã‚Œã¾ã™ã€‚', touristSpots: 'é³¥ç¾½æ°´æ—é¤¨ã€ãƒŸã‚­ãƒ¢ãƒˆçœŸç å³¶' },
            { id: 23, name: 'å¤§æ±Ÿæˆ¸æ¸©æ³‰ç‰©èªPremium ä¼Šå‹¢å¿—æ‘©', prefecture: 'ä¸‰é‡', location: 'å¿—æ‘©å¸‚', price: 17000, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: true, privateDining: false }, description: 'è‹±è™æ¹¾ã‚’æœ›ã‚€çµ¶æ™¯éœ²å¤©é¢¨å‘‚ã¨æµ·ã®å¹¸ãƒã‚¤ã‚­ãƒ³ã‚°ãŒè‡ªæ…¢ã€‚ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ©ã‚¦ãƒ³ã‚¸ã§ã¯ãƒ‰ãƒªãƒ³ã‚¯ã‚µãƒ¼ãƒ“ã‚¹ã‚‚ã€‚ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚', touristSpots: 'æ¨ªå±±å±•æœ›å°ã€ã¨ã‚‚ã„ãã®å›½ä¼Šå‹¢å¿è€…ã‚­ãƒ³ã‚°ãƒ€ãƒ ' },
            { id: 24, name: 'ç«ã®è°·æ¸©æ³‰ ç¾æ‰ãƒªã‚¾ãƒ¼ãƒˆ', prefecture: 'ä¸‰é‡', location: 'æ´¥å¸‚', price: 15000, features: { kanrekiPlan: false, chanchanko: false, allYouCanDrink: true, privateDining: false }, description: 'è‡ªç„¶ã«å›²ã¾ã‚ŒãŸç·åˆãƒªã‚¾ãƒ¼ãƒˆã€‚å¤šå½©ãªæ¸©æ³‰ã‚„ãƒ—ãƒ¼ãƒ«ãŒã‚ã‚Šã€é£Ÿäº‹ã¯ãƒã‚¤ã‚­ãƒ³ã‚°ã‚„ä¼šå¸­ã‚’é¸ã¹ã¾ã™ã€‚é£²ã¿æ”¾é¡Œãƒ—ãƒ©ãƒ³ã‚‚äººæ°—ã§ã™ã€‚', touristSpots: 'å‘¨è¾ºã®æ£®æ—ã‚»ãƒ©ãƒ”ãƒ¼ãƒ­ãƒ¼ãƒ‰ã€èµ¤ç›®å››åå…«æ»ï¼ˆè»Šã§ã‚¢ã‚¯ã‚»ã‚¹ï¼‰' },
            { id: 25, name: 'æ¹¯å…ƒ æ¦ŠåŸèˆ˜', prefecture: 'ä¸‰é‡', location: 'æ´¥å¸‚', price: 18500, features: { kanrekiPlan: true, chanchanko: false, allYouCanDrink: false, privateDining: true }, description: 'æ¸…å°‘ç´è¨€ã‚†ã‹ã‚Šã®ã€Œä¸ƒæ —ã®æ¹¯ã€ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã‚‹ç¾è‚Œã®æ¹¯ã€‚æºæ³‰ã‹ã‘æµã—ã®æ¸©æ³‰ã¨ã€å€‹å®¤ã§ã„ãŸã ãå­£ç¯€ã®ä¼šå¸­æ–™ç†ã§ã€è½ã¡ç€ã„ãŸãŠç¥ã„ãŒã§ãã¾ã™ã€‚', touristSpots: 'ãƒ«ãƒ¼ãƒ–ãƒ«å½«åˆ»ç¾è¡“é¤¨ã€æ¦ŠåŸæ¸©æ³‰å‘¨è¾ºã®æ•£ç­–' }
        ];

        let chart;
        const filters = {
            prefecture: 'all',
            budget: 25000,
            features: []
        };

        const prefectureFilters = document.getElementById('prefecture-filters');
        const budgetSlider = document.getElementById('budget-slider');
        const budgetValue = document.getElementById('budget-value');
        const featureFilters = document.getElementById('feature-filters');
        const hotelGrid = document.getElementById('hotel-grid');
        const resultsCount = document.getElementById('results-count');
        
        const modal = document.getElementById('hotel-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');

        function formatCurrency(value) {
            return new Intl.NumberFormat('ja-JP').format(value);
        }

        function createHotelCard(hotel) {
            const card = document.createElement('div');
            card.className = 'hotel-card bg-white rounded-xl shadow-md overflow-hidden cursor-pointer';
            card.addEventListener('click', () => openModal(hotel));
            
            let featureIcons = '';
            if (hotel.features.kanrekiPlan) featureIcons += '<span class="mr-2" title="é‚„æš¦ç¥ã„ãƒ—ãƒ©ãƒ³">ğŸ‰</span>';
            if (hotel.features.chanchanko) featureIcons += '<span class="mr-2" title="ã¡ã‚ƒã‚“ã¡ã‚ƒã‚“ã“è²¸å‡º">ğŸ‘˜</span>';
            if (hotel.features.allYouCanDrink) featureIcons += '<span class="mr-2" title="é£²ã¿æ”¾é¡Œ">ğŸ»</span>';
            if (hotel.features.privateDining) featureIcons += '<span class="mr-2" title="å€‹å®¤é£Ÿ">ğŸ½ï¸</span>';

            card.innerHTML = `
                <div class="p-6">
                    <div class="flex justify-between items-start">
                        <p class="text-sm font-semibold text-gray-500">${hotel.prefecture}çœŒãƒ»${hotel.location}</p>
                        <p class="text-lg font-bold text-[#006D77]">${formatCurrency(hotel.price)}å††ï½</p>
                    </div>
                    <h4 class="font-bold text-xl mt-1">${hotel.name}</h4>
                    <p class="text-gray-600 mt-2 text-sm h-10 overflow-hidden">${hotel.description}</p>
                    <div class="mt-4 text-xl">${featureIcons}</div>
                </div>
            `;
            return card;
        }

        function renderHotels() {
            hotelGrid.innerHTML = '';
            const filteredHotels = hotelData.filter(hotel => {
                const prefectureMatch = filters.prefecture === 'all' || hotel.prefecture === filters.prefecture;
                const budgetMatch = hotel.price <= filters.budget;
                const featureMatch = filters.features.every(feature => hotel.features[feature]);
                return prefectureMatch && budgetMatch && featureMatch;
            });
            
            filteredHotels.forEach(hotel => {
                hotelGrid.appendChild(createHotelCard(hotel));
            });

            resultsCount.textContent = filteredHotels.length;
            updateChart(filteredHotels);
        }
        
        function updateChart(data) {
             const ctx = document.getElementById('budget-chart').getContext('2d');
             if (chart) {
                chart.destroy();
            }
             
            const sortedData = [...data].sort((a, b) => a.price - b.price);

            chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: sortedData.map(h => h.name),
                    datasets: [{
                        label: '1åã‚ãŸã‚Šæœ€ä½æ–™é‡‘(å††)',
                        data: sortedData.map(h => h.price),
                        backgroundColor: sortedData.map(h => {
                            if (h.prefecture === 'æ„›çŸ¥') return '#83C5BE';
                            if (h.prefecture === 'å²é˜œ') return '#EDDCD2';
                            if (h.prefecture === 'ä¸‰é‡') return '#FFDDD2';
                            return '#E29578';
                        }),
                        borderColor: '#ffffff',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value, index, values) {
                                    return value.toLocaleString('ja-JP', { style: 'currency', currency: 'JPY' });
                                }
                            }
                        },
                        y: {
                           ticks: {
                                autoSkip: false,
                                font: {
                                    size: 10
                                }
                           }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += new Intl.NumberFormat('ja-JP', { style: 'currency', currency: 'JPY' }).format(context.parsed.x);
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function openModal(hotel) {
            modalTitle.textContent = hotel.name;
            modalBody.innerHTML = `
                <p class="text-sm font-semibold text-gray-500">${hotel.prefecture}çœŒãƒ»${hotel.location}</p>
                <p class="text-lg font-bold text-[#006D77] mt-1">${formatCurrency(hotel.price)}å††ï½ / 1å</p>
                <div class="mt-4 border-t pt-4">
                    <h4 class="font-bold text-lg">å®¿ã®é­…åŠ›</h4>
                    <p class="mt-1 text-gray-700">${hotel.description}</p>
                </div>
                <div class="mt-4 border-t pt-4">
                    <h4 class="font-bold text-lg">å‘¨è¾ºã®è¦³å…‰ã‚¹ãƒãƒƒãƒˆ</h4>
                    <p class="mt-1 text-gray-700">${hotel.touristSpots}</p>
                </div>
                <div class="mt-6 text-center">
                    <a href="#" class="inline-block bg-[#006D77] text-white font-bold py-2 px-6 rounded-lg hover:bg-opacity-80 transition-colors">äºˆç´„ã‚µã‚¤ãƒˆã§ç¢ºèªã™ã‚‹</a>
                    <p class="text-xs text-gray-500 mt-2">ï¼ˆã“ã‚Œã¯ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚å®Ÿéš›ã®äºˆç´„ã‚µã‚¤ãƒˆã«ã¯é·ç§»ã—ã¾ã›ã‚“ã€‚ï¼‰</p>
                </div>
            `;
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modal.classList.add('opacity-100');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modal.classList.add('opacity-0');
            setTimeout(() => {
                modal.classList.add('pointer-events-none');
                 document.body.style.overflow = 'auto';
            }, 250);
        }

        prefectureFilters.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                prefectureFilters.querySelector('.active').classList.remove('active');
                e.target.classList.add('active');
                filters.prefecture = e.target.dataset.value;
                renderHotels();
            }
        });
        
        featureFilters.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                e.target.classList.toggle('active');
                const value = e.target.dataset.value;
                if (filters.features.includes(value)) {
                    filters.features = filters.features.filter(f => f !== value);
                } else {
                    filters.features.push(value);
                }
                renderHotels();
            }
        });

        budgetSlider.addEventListener('input', (e) => {
            filters.budget = e.target.value;
            budgetValue.textContent = formatCurrency(e.target.value);
        });

        budgetSlider.addEventListener('change', renderHotels);
        
        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        document.addEventListener('DOMContentLoaded', renderHotels);
    </script>
</body>
</html>
